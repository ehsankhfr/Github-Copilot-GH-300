# Develop Unit Tests Using GitHub Copilot Tools

**Module**: GitHub Copilot Training  
**Duration**: 60 minutes  
**Level**: Intermediate  
**Target Audience**: Developers, DevOps Engineers, Students

## Overview

Unit testing is a crucial aspect of software development that ensures the functionality of individual components within a system. This module introduces how to generate unit tests with GitHub Copilot and GitHub Copilot Chat in Visual Studio Code.

The module focuses on using the Chat view, Inline Chat, smart actions, and code completions to create unit tests for the xUnit testing framework. Visual Studio Code and the C# Dev Kit extension are used to create unit test projects and manage unit tests.

## Learning Objectives

By the end of this module, you'll be able to:

- Explain how GitHub Copilot Chat supports various testing tasks (unit, integration, end-to-end tests)
- Use the Generate Tests smart action to create unit tests for specific code blocks or entire files
- Leverage the Inline Chat feature to generate and refine unit tests directly within the code editor
- Utilize the Chat view modes (Ask, Edit, Agent) to create, update, and automate unit test workflows
- Apply GitHub Copilot's capabilities to streamline unit test development for C# applications in Visual Studio Code

## Prerequisites

- Basic understanding of software development concepts
- Familiarity with at least one programming language
- A GitHub account with access to GitHub Copilot
- Visual Studio Code installed

**Important**: To complete GitHub Copilot training, you must have an active subscription (includes Free plan), or be assigned to a subscription managed by an organization or enterprise.

---

## 1. Unit Testing Tools and Environment

GitHub Copilot Chat can be used to suggest unit tests based on the code you specify. For example, if you specify a method signature and body, Copilot Chat can suggest test cases covering input parameters and expected output values.

GitHub Copilot Chat uses your code's context and semantics to suggest assertions that ensure the function is working correctly. It helps you write test cases for edge cases and boundary conditions that might be difficult to identify manually.

**Important**: Generated test cases may not cover all possible scenarios. Manual testing and code reviews are necessary to ensure code quality.

### GitHub Copilot Support for Unit Testing

Copilot can help with the following testing tasks:

**Set up testing frameworks**: Get help configuring the right testing framework and VS Code extensions for your project and language.

**Generate test code**: Create unit tests, integration tests, and end-to-end tests that cover your application code.

**Handle edge cases**: Generate comprehensive test suites to cover edge cases and error conditions.

**Fix failing tests**: Receive suggestions for fixing test failures.

**Maintain consistency**: Personalize Copilot to generate tests that follow your project's coding practices.

### Set Up Your Testing Framework

To accelerate your testing workflow, Copilot can help set up the testing framework and VS Code extensions.

1. Open the Chat view
2. Enter the `/setupTests` command in the chat input field
3. Follow GitHub Copilot's guidance to configure your project

Copilot suggests appropriate testing frameworks based on your project type.

### Write Unit Tests with GitHub Copilot

You can generate unit tests using the following GitHub Copilot tools:

- **Chat view**: Generate unit tests for a project, class, or method using Ask, Edit, or Agent mode
- **Inline Chat**: Generate unit tests for selected classes or methods
- **Smart actions**: Use the Generate Tests smart action to generate unit tests without writing a prompt
- **Code line completions**: Suggest additional unit tests for an existing test case

### Fix Failing Tests

Copilot integrates with the Test Explorer in Visual Studio Code:

1. In the Test Explorer, hover over a failing test
2. Select the **Fix Test Failure** button (sparkle icon)
3. Review and apply Copilot's suggested fix

Alternatively:
1. Open the Chat view
2. Enter the `/fixTestFailure` slash command
3. Follow Copilot's suggestions to fix the test

**Tip**: Agent mode monitors the test output when running tests, and automatically attempts to fix and rerun failing tests.

### Maintain Consistency

If your organization has specific testing requirements, you can customize how Copilot generates tests by providing custom instructions:

- Specify preferred testing frameworks
- Define naming conventions for tests
- Set code structure preferences
- Request specific test patterns or methodologies

---

## 2. Visual Studio Code Support for Unit Tests

To create and run C# unit tests in Visual Studio Code, you need:

- The .NET 8.0 SDK or later
- The C# Dev Kit extension for Visual Studio Code
- A test framework package added to your project

### C# Dev Kit Support for Unit Tests

The C# Dev Kit extension provides a rich set of features:

- **Test Explorer**: A tree view to show all test cases in your workspace
- **Run/Debug test cases**: A feature to run and debug test cases
- **View test results**: A feature to view the test results
- **Testing commands**: Commands to run all tests, run failed tests, and more
- **Testing settings**: Settings specific to testing

### Test Framework Package

The C# Dev Kit supports the following test frameworks:

- **xUnit**
- **NUnit**
- **MSTest**

The C# Dev Kit enables you to create a test project, add a test framework package, and manage unit tests.

### Enabling a Test Framework

The Command Palette provides the easiest way to enable a test framework. You can open it by:

- Press `Ctrl + Shift + P` keys (Windows/Linux) or `Cmd + Shift + P` (macOS)
- Open the **View** menu, then select **Command Palette**
- Open the Solution Explorer view, right-click the solution folder, then select **New Project**

#### xUnit

1. Open the Command Palette and select **.NET:New Project...**
2. Select **xUnit Test Project** and provide name and location
3. This creates a new project with the following package references:
   - Microsoft.NET.Test.Sdk
   - xUnit
   - xunit.runner.visualstudio
   - coverlet.collector

From the Terminal:
```bash
dotnet add [location of your test csproj file] reference [location of the csproj file for project to be tested]
```

#### NUnit

1. Open the Command Palette and select **.NET:New Project...**
2. Select **NUnit3 Test Project** and provide name and location
3. This creates a new project with the following package references:
   - Microsoft.NET.Test.Sdk
   - NUnit
   - NUnit3TestAdapter

From the Terminal:
```bash
dotnet add [location of your test csproj file] reference [location of the csproj file for project to be tested]
```

#### MSTest

1. Open the Command Palette and select **.NET:New Project...**
2. Select **MSTest Test Project** and provide name and location
3. This creates a new project with the following package references:
   - Microsoft.NET.Test.Sdk
   - MSTest.TestAdapter
   - MSTest.TestFramework
   - coverlet.collector

From the Terminal:
```bash
dotnet add [location of your test csproj file] reference [location of the csproj file for project to be tested]
```

---

## 3. Develop Unit Tests in Visual Studio Code

The combination of Visual Studio Code and GitHub Copilot Chat provides a powerful environment for creating and running unit tests.

### The Unit Testing Process

The process can be broken down into three stages:

1. **Use Visual Studio Code to create a test project** for your unit tests
2. **Use GitHub Copilot Chat to develop unit test cases** for your C# project
3. **Use Visual Studio Code and the C# Dev Kit to run and manage** your unit tests

### Create a Test Project

You need to create a test project to hold your unit tests:

1. Use the Command Palette to create a test project using a specified test framework
2. Use the integrated Terminal to add a reference to the project you're testing

This process creates a new project and configures the test runner for the selected framework.

### Generate Unit Test Cases Using GitHub Copilot Chat

Copilot Chat recognizes your test framework and coding style and generates matching code snippets. You can use it to:

- **Write unit test cases** based on code open in the editor or code snippet you highlight
- **Identify and write test cases** for edge cases and boundary conditions (error handling, null values, unexpected input types)
- **Suggest assertions** that ensure the function is working correctly based on code's context and semantics

**Scenarios for generating unit test cases**:

- If a single method is visible in full: `Write a unit test for the method in the #editor`
- If multiple methods are visible or method extends beyond visible area: Select the code, then ask: `#selection write a unit test for this code`

### Run and Manage Unit Tests in Visual Studio Code

Visual Studio Code and the C# Dev Kit provide features to run and manage unit tests:

**Run/Debug test cases**: C# Dev Kit generates shortcuts (green play button) on the left side of class and method definitions. Select the button to run test cases, or right-click for more options.

**Test Explorer**: A tree view showing all test cases in your workspace. Select the beaker button on the left-side Activity bar to open it. You can run/debug test cases and view results from here.

**View test results**: After running/debugging, the state of test items is updated in both editor decorations and Test Explorer. Select links in stack trace to navigate to source location.

**Testing commands**: Commands (e.g., "Run All Tests") can be found by searching for "Test:" in the Command Palette.

**Testing settings**: Settings specific to testing can be found by searching for "Testing" in the Settings editor.

---

## 4. Create Unit Tests Using the Generate Tests Smart Action

The Generate Tests smart action helps you create unit tests for your code. It analyzes the code in the current file and generates test cases based on the code's structure and behavior.

### Generate Unit Tests for a File

To generate unit tests for an entire file:

1. Open the file containing the code you want to test
2. Right-click inside the code editor, select **Copilot**, then select **Generate Tests**
3. GitHub Copilot analyzes the code and generates unit tests for all functions and methods
4. The generated tests are displayed in the code editor (typically in a new test file or at the end of current file)
5. Generated tests should include assertions and test cases covering various scenarios
6. Review the generated tests and make adjustments as needed
7. Select **Accept** or **Close** to accept or discard suggested unit tests
8. Save the test file (typically to a separate "tests" directory)
9. Run the tests to ensure they pass
10. If necessary, refine the tests by adding additional test cases or modifying existing ones

### Generate Unit Tests for a Selection

To generate unit tests for a specific selection:

1. Open the file containing the code you want to test
2. Select the code block you want to test
3. Right-click the selected code, select **Copilot**, then select **Generate Tests**
4. GitHub Copilot analyzes the selected code and generates unit tests for the selected function or method
5. Review the generated tests and make necessary adjustments
6. Save the file
7. Run the tests to ensure they pass
8. If necessary, refine the tests

---

## 5. Create Unit Tests Using Inline Chat

The Inline Chat feature allows you to create unit tests directly in the code editor. This is useful when you want more control than the Generate Tests smart action provides.

### To Create Unit Tests Using Inline Chat:

1. Open the file containing the code you want to test
2. Select the code block you want to test
3. Open an Inline Chat session using `Ctrl+I` (Windows/Linux) or `Cmd+I` (Mac)
   - Alternatively, select **Editor Inline Chat** from GitHub Copilot menus
4. Enter a prompt that generates unit tests for the selected code
   - Example: `/tests Generate unit tests for this method. Validate both success and failure, and include edge cases.`
5. Review the suggested unit tests and make adjustments as needed
6. The generated tests are displayed in the code editor (Copilot generates test code in existing test file or creates new one)
7. Select **Accept** or **Close** to accept or discard suggested unit tests
8. Save the test file
9. Build the project to ensure the test file is included
10. Resolve any build errors
11. Run the tests to ensure they pass
12. If necessary, refine tests using Inline Chat to add or modify test cases

---

## 6. Create Unit Tests Using Chat View Modes

The Chat view provides three modes for creating unit tests: Ask, Edit, and Agent. Each mode has its own strengths.

### Ask Mode

Optimized for asking questions about code projects, coding topics, and general technology concepts.

**To create unit tests using Ask mode:**

1. Open the file containing the code you want to test
2. Open the Chat view and start a new chat session using Ask mode
3. Add context to the chat session:
   - Drag and drop files from EXPLORER view into Chat view
   - Use the **Add Context** button
   - Open external files in code editor and add them to context
   - Use `@workspace` chat variable to specify workspace
4. Enter a prompt asking for unit tests
   - Example: `@workspace /explain I need to create unit tests for the code in this file. The tests should be written in Python and use the unittest framework.`
5. Review suggested unit tests and refine results using updated prompts if necessary
6. Move suggested unit tests into a test file
7. Save the test file
8. Run the tests to ensure they pass
9. If necessary, refine tests

### Edit Mode

Optimized for making edits across multiple files in your codebase.

**To create unit tests using Edit mode:**

1. Open the file containing the code you want to test
2. Open the Chat view and start a new chat session using Edit mode
3. Add context to the chat session:
   - Chat participants aren't available in edit mode, so you can't specify `@workspace`
   - Add context using `#codebase` and by dragging/dropping files or folders
   - Open external files and use **Add Context** button
4. Enter a prompt to create the intended unit tests
   - Example: `I need to create unit tests for the code in this file. The tests should be written in Python and use the unittest framework. Create a test file in the same directory as the code file.`
5. Review the test file created using edit mode, then save or discard
6. Update the file using new prompts if necessary
7. Save the test file
8. Run the tests to ensure they pass
9. If necessary, refine tests

### Agent Mode

Optimized for starting an agentic coding workflow. Best for creating unit tests requiring a more in-depth understanding of the project.

**To create unit tests using Agent mode:**

1. Open the file containing the code you want to test
2. Open the Chat view and start a new chat session using Agent mode
3. Let agent mode determine the context (Copilot automatically determines relevant context and files)
4. Optionally, select the **Tools** icon to configure which tools can be used
   - Select tools you want (Test Explorer, Terminal, GitHub Copilot)
5. Enter a prompt defining the intended tasks
   - Example: `Ensure that a suitable unit tests project is prepared for the selected code file. Create a test file in the unit test project that includes unit tests for all methods in the selected file. Unit tests should be written in C# and use the xUnit framework. Run the tests to ensure expected results.`
6. Monitor the progress of the agent mode as it performs tasks
7. Confirm tool invocations and terminal commands (or interrupt if necessary)
8. Review files that agent mode created or updated, then keep or discard updates
9. Use new prompts to correct or enhance specific tests if necessary

**Important**: When using Chat view in agent mode, GitHub Copilot may make multiple premium requests to complete a single task. Premium requests can be used by user-initiated prompts and follow-up actions Copilot takes on your behalf. The total premium requests used depends on task complexity, number of steps, and model selected.

---

## 7. Module Assessment

Choose the best response for each question.

### Question 1
**Which Visual Studio Code extension is specifically designed to integrate GitHub Copilot for enhanced code generation and testing capabilities?**

- [ ] A. C# Dev Kit
- [ ] B. Java Language Support
- [ ] C. GitHub Copilot

### Question 2
**Which statement best describes the role of GitHub Copilot in generating test cases for error conditions?**

- [ ] A. It ensures all tests pass by modifying the code to fit the tests
- [ ] B. It suggests test cases for error handling, ensuring robustness against unexpected inputs
- [ ] C. It automatically fixes all bugs found during test execution

### Question 3
**Which approach ensures that GitHub Copilot generates relevant test cases for edge conditions in your C# code?**

- [ ] A. Only test for average input values, assuming edge cases are covered
- [ ] B. Provide detailed descriptions of the expected behavior for edge cases in the Chat view
- [ ] C. Depend entirely on default settings in GitHub Copilot Chat

### Question 4
**What is a critical advantage of using GitHub Copilot Chat when developing unit test cases for boundary conditions?**

- [ ] A. It provides a complete replacement for all manual testing processes
- [ ] B. It helps identify missing test scenarios for boundary conditions, ensuring comprehensive test coverage
- [ ] C. It automatically fixes all bugs detected during testing

### Question 5
**Which initial step should you take to ensure your environment is correctly set up for unit test development in VS Code?**

- [ ] A. Create a new JavaScript project in Visual Studio Code
- [ ] B. Install the C# Dev Kit extension and GitHub Copilot in Visual Studio Code
- [ ] C. Install Java SDK and Python extension in Visual Studio Code

### Question 6
**Which feature of GitHub Copilot contributes to improving the robustness of unit tests?**

- [ ] A. Guaranteeing zero test failures
- [ ] B. Providing a graphical interface for test management
- [ ] C. Generating test cases for null values and unexpected input types

### Question 7
**How can you use GitHub Copilot Chat to generate unit test cases for a C# method that handles null inputs?**

- [ ] A. Use the /setupTests command to initialize the testing framework for null inputs
- [ ] B. Ask Copilot Chat to provide test cases for the method considering null inputs as potential edge cases
- [ ] C. Generate test code manually for null inputs without using Copilot Chat

### Question 8
**How does GitHub Copilot assist in maintaining consistency in unit test coding practices across projects?**

- [ ] A. By automatically refactoring code based on test results
- [ ] B. By enforcing a single testing framework for all projects
- [ ] C. By personalizing test generation to follow specific coding standards

### Question 9
**While setting up your testing environment, you realize that your GitHub Copilot suggestions match public code. What could be a reason?**

- [ ] A. You haven't installed the C# Dev Kit extension
- [ ] B. Your account is blocking suggestions that match public code
- [ ] C. You're using a personal GitHub Copilot subscription with defaults

### Question 10
**What command do you use in the Chat view to set up testing frameworks?**

- [ ] A. /createTests
- [ ] B. /setupTests
- [ ] C. /initTests
- [ ] D. /configureTests

### Question 11
**Which keyboard shortcut opens Inline Chat on Windows?**

- [ ] A. Ctrl+I
- [ ] B. Ctrl+Shift+I
- [ ] C. Alt+I
- [ ] D. Ctrl+T

### Question 12
**What does the Test Explorer provide?**

- [ ] A. A code editor
- [ ] B. A tree view to show all test cases in your workspace
- [ ] C. A debugging tool
- [ ] D. A file manager

### Question 13
**Which test frameworks does C# Dev Kit support?**

- [ ] A. Only xUnit
- [ ] B. Only NUnit
- [ ] C. Only MSTest
- [ ] D. xUnit, NUnit, and MSTest

### Question 14
**How do you fix a failing test using the Test Explorer?**

- [ ] A. Delete the test
- [ ] B. Hover over the failing test and select the Fix Test Failure button (sparkle icon)
- [ ] C. Restart Visual Studio Code
- [ ] D. Run all tests again

### Question 15
**What is the purpose of the Generate Tests smart action?**

- [ ] A. To create unit tests for code without writing a prompt
- [ ] B. To run existing tests
- [ ] C. To delete test files
- [ ] D. To debug code

### Question 16
**Which Chat view mode is best for creating tests requiring in-depth project understanding?**

- [ ] A. Ask mode
- [ ] B. Edit mode
- [ ] C. Agent mode
- [ ] D. Debug mode

### Question 17
**What does "@workspace" do in the Chat view?**

- [ ] A. Opens a new workspace
- [ ] B. Extends the context of questions to the whole project
- [ ] C. Creates a workspace folder
- [ ] D. Deletes the workspace

### Question 18
**What is a key difference between Ask mode and Edit mode?**

- [ ] A. Edit mode can create or update test files across multiple files, while Ask mode provides suggestions
- [ ] B. Ask mode is faster
- [ ] C. Edit mode requires administrator privileges
- [ ] D. Ask mode only works with Python

### Question 19
**When should you use Inline Chat instead of the Generate Tests smart action?**

- [ ] A. When you want less control
- [ ] B. When you want more control than the smart action provides
- [ ] C. When you don't have Copilot installed
- [ ] D. When testing JavaScript only

### Question 20
**What does agent mode do when monitoring test output?**

- [ ] A. Sends emails about test failures
- [ ] B. Automatically attempts to fix and rerun failing tests
- [ ] C. Deletes failing tests
- [ ] D. Creates bug reports

### Question 21
**What package reference is required for xUnit?**

- [ ] A. Only xUnit
- [ ] B. Microsoft.NET.Test.Sdk, xUnit, xunit.runner.visualstudio, coverlet.collector
- [ ] C. Only Microsoft.NET.Test.Sdk
- [ ] D. NUnit

### Question 22
**How do you add a reference from your test project to the project being tested?**

- [ ] A. Copy the code into the test project
- [ ] B. Use `dotnet add reference` command in Terminal
- [ ] C. Manually edit the csproj file
- [ ] D. It's added automatically

### Question 23
**What should you do after Copilot generates unit tests?**

- [ ] A. Immediately deploy to production
- [ ] B. Review the tests, make adjustments if needed, and run them to ensure they pass
- [ ] C. Delete the original code
- [ ] D. Send them to the team lead

### Question 24
**What is a limitation of generated test cases?**

- [ ] A. They may not cover all possible scenarios; manual testing and code reviews are necessary
- [ ] B. They only work on Mondays
- [ ] C. They delete your code
- [ ] D. They cannot test C# code

### Question 25
**Which feature helps you maintain consistent test generation across projects?**

- [ ] A. Random test generation
- [ ] B. Custom instructions for Copilot (preferred frameworks, naming conventions, code structure)
- [ ] C. Automatic code deletion
- [ ] D. Test Explorer themes

---

## Answer Key

1. **C** - GitHub Copilot
2. **B** - It suggests test cases for error handling, ensuring robustness against unexpected inputs
3. **B** - Provide detailed descriptions of the expected behavior for edge cases in the Chat view
4. **B** - It helps identify missing test scenarios for boundary conditions, ensuring comprehensive test coverage
5. **B** - Install the C# Dev Kit extension and GitHub Copilot in Visual Studio Code
6. **C** - Generating test cases for null values and unexpected input types
7. **B** - Ask Copilot Chat to provide test cases for the method considering null inputs as potential edge cases
8. **C** - By personalizing test generation to follow specific coding standards
9. **C** - You're using a personal GitHub Copilot subscription with defaults
10. **B** - /setupTests
11. **A** - Ctrl+I
12. **B** - A tree view to show all test cases in your workspace
13. **D** - xUnit, NUnit, and MSTest
14. **B** - Hover over the failing test and select the Fix Test Failure button (sparkle icon)
15. **A** - To create unit tests for code without writing a prompt
16. **C** - Agent mode
17. **B** - Extends the context of questions to the whole project
18. **A** - Edit mode can create or update test files across multiple files, while Ask mode provides suggestions
19. **B** - When you want more control than the smart action provides
20. **B** - Automatically attempts to fix and rerun failing tests
21. **B** - Microsoft.NET.Test.Sdk, xUnit, xunit.runner.visualstudio, coverlet.collector
22. **B** - Use `dotnet add reference` command in Terminal
23. **B** - Review the tests, make adjustments if needed, and run them to ensure they pass
24. **A** - They may not cover all possible scenarios; manual testing and code reviews are necessary
25. **B** - Custom instructions for Copilot (preferred frameworks, naming conventions, code structure)

---

## Summary

In this module, you learned about using GitHub Copilot Chat and Visual Studio Code for creating and managing unit tests. The content discussed how Copilot Chat aids in generating code snippets for test cases, suggesting possible inputs, outputs, assertions, and identifying edge cases and boundary conditions.

### Key Takeaways:

- **Testing Framework Setup**: Use `/setupTests` command to configure appropriate testing framework and VS Code extensions
- **Multiple Generation Methods**: Generate Tests smart action, Inline Chat, Chat view modes (Ask, Edit, Agent), and code line completions
- **Test Framework Support**: C# Dev Kit supports xUnit, NUnit, and MSTest
- **Chat View Modes**: Ask mode for questions, Edit mode for multi-file edits, Agent mode for autonomous workflows
- **Inline Chat Control**: More control than smart actions with `Ctrl+I` (Windows) or `Cmd+I` (Mac)
- **Test Explorer Integration**: Fix failing tests with sparkle icon, run/debug with green play button
- **Edge Case Coverage**: Copilot suggests test cases for error handling, null values, and unexpected input types
- **Custom Instructions**: Personalize test generation with preferred frameworks, naming conventions, and code structure
- **Agent Mode Capabilities**: Automatically monitors test output, attempts to fix and rerun failing tests
- **Context Management**: Use `@workspace`, `#codebase`, `#selection`, and `#editor` for relevant context
- **Package References**: Proper package references required (Microsoft.NET.Test.Sdk, framework-specific packages)
- **Quality Reminder**: Generated tests may not cover all scenarios; manual testing and code reviews remain necessary
- **Premium Requests**: Agent mode may make multiple premium requests depending on task complexity

### Best Practices:

1. **Review Generated Tests**: Always review and adjust generated tests before accepting
2. **Run Tests Immediately**: Build and run tests after generation to ensure they work
3. **Refine Incrementally**: Use Copilot tools iteratively to improve test coverage
4. **Provide Clear Context**: Select specific code or use chat variables for better results
5. **Maintain Consistency**: Use custom instructions to ensure tests follow project standards
6. **Leverage Multiple Tools**: Combine smart actions, Inline Chat, and Chat view modes for comprehensive testing

### References:
- [GitHub Copilot documentation](https://docs.github.com/copilot)
- [GitHub Copilot in Visual Studio Code](https://code.visualstudio.com/docs/copilot/overview)
- [GitHub Copilot FAQ](https://code.visualstudio.com/docs/copilot/faq)
- [GitHub Copilot Cheat Sheet](https://code.visualstudio.com/docs/copilot/copilot-cheat-sheet)
- [GitHub Copilot Workspace Context](https://code.visualstudio.com/docs/copilot/workspace-context)
- [Testing with the C# Dev Kit](https://code.visualstudio.com/docs/csharp/testing)
